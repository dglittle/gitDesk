{% extends 'base.html' %}

{% block title %}gitDesk - Add Repo{% endblock %}

{% block body %}

<h1>Your GitHub Repos</h1>
<small>{{githubuserid}}</small>

<table class="table table-striped table-hover">
	<tr>
		<th>Repo Name</th>
		<th>Status</th>
	</tr>
	{% for r in repos %}
	<tr>
		<td>{{r.name}}</td>
		<td>{% if r.is_linked %}
			Linked to {{r.team_name}}&nbsp;&nbsp;<a href="./api/unlinkrepo?repo={{r.name}}" ><small>unlink</small></a>
			{% else %}
			Not Linked&nbsp;&nbsp;
			{% if teams|length > 1 %}
				<div class="dropdown" style="display: inline;">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#"><small>link repo</small></a>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" style="width: 300px;">
						{% for t in teams %}
							<li><small><a href="./api/linkrepo?repo={{r.name}}&githubuserid={{githubuserid}}&team={{t.reference}}" >
								{{t.company_name}}&nbsp;&gt;&nbsp;{{t.name}}</a></small></li>
						{% endfor %}
					</ul>
				</div>
			{% else %}
				{% for t in teams %}
				<a href="./api/linkrepo?repo={{r.name}}&githubuserid={{githubuserid}}&team={{t.reference}}" ><small>link repo</small></a>
				{% endfor %}
			{% endif %}
			{% endif %}
		</td>
	</tr>
	{% endfor %}
</table>

<div class="oHint">This link the selected GitHub repo with oDesk, so that you can create and manage jobs on oDesk using markdown inside the GitHub issue.</div>

</form>


{% endblock body%}


<input type="hidden" name="team" id="team" value="">
